#!/bin/bash
echo 'NCH Arch Installer (post-install config.)'
read -p '[Press any key to continue]'
# 3.3: Timezone
echo "Timezone config..."
ln -sf /usr/share/zoneinfo/America/Mexico_City /etc/localtime
hwclock --systohc
# 3.4: Localization
echo "Localization config..."
cp /etc/locale.gen /etc/locale.gen.backup
## Default
echo '# Generated by NCH install script. Backup file: /etc/locale.gen.backup' > /etc/locale.gen
echo en_US.UTF-8 UTF-8 >> /etc/locale.gen
## MX spanish
echo es_MX.UTF-8 UTF-8 >> /etc/locale.gen
## Generate locales
locale-gen
## LANG (MX spanish)
echo LANG=es_MX.UTF-8 > /etc/locale.conf
## Keyboard Layout
echo KEYMAP=la-latin1 > /etc/vconsole.conf
# 3.5: Network
echo "Network config..."
echo "Enter hostname: "
read HOSTNAME_INPUT
echo $HOSTNAME_INPUT > /etc/hostname
# 3.7: Root password
echo "Root password"
passwd
# 3.8: Bootloader
echo "Bootloader config..."
bootctl install
##
echo "default arch-zen.conf
timeout 1
console-mode max
editor no" > /boot/loader/loader.conf
##
cp arch-zen.conf /boot/loader/entries
cp arch-zen-fallback.conf /boot/loader/entries

echo "Exit, unmount & reboot. Then execute next script"
